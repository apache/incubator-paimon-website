
<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta name="generator" content="Hugo 0.80.0" />
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Writing Tables #  You can use the INSERT statement to inserts new rows into a table or overwrites the existing data in the table. The inserted rows can be specified by value expressions or result from a query.
Syntax #  INSERT { INTO | OVERWRITE } table_identifier [ part_spec ] [ column_list ] { value_expr | query }   part_spec
An optional parameter that specifies a comma-separated list of key and value pairs for partitions.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="Writing Tables" />
<meta property="og:description" content="Writing Tables #  You can use the INSERT statement to inserts new rows into a table or overwrites the existing data in the table. The inserted rows can be specified by value expressions or result from a query.
Syntax #  INSERT { INTO | OVERWRITE } table_identifier [ part_spec ] [ column_list ] { value_expr | query }   part_spec
An optional parameter that specifies a comma-separated list of key and value pairs for partitions." />
<meta property="og:type" content="article" />
<meta property="og:url" content="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/how-to/writing-tables/" />

<title>Writing Tables | Apache Flink Table Store</title>
<link rel="manifest" href="/flink/flink-table-store-docs-release-0.3/manifest.json">
<link rel="icon" href="/flink/flink-table-store-docs-release-0.3/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/flink/flink-table-store-docs-release-0.3/book.min.3bc4108a5b57c9a7e6fcae92ff69940435f8c46c4e1e4a311aedc9b2d8e06792.css" integrity="sha256-O8QQiltXyafm/K6S/2mUBDX4xGxOHkoxGu3JstjgZ5I=">
<script defer src="/flink/flink-table-store-docs-release-0.3/en.search.min.bd2fd37bc7f836c4face92be4fc4fa0e40609bd9198352bf46bbd3a7436e380c.js" integrity="sha256-vS/Te8f4NsT6zpK&#43;T8T6DkBgm9kZg1K/RrvTp0NuOAw="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  

<link rel="stylesheet" type="text/css" href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/font-awesome/css/font-awesome.min.css">
<script src="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/js/anchor.min.js"></script>
<script src="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/js/flink.js"></script>


  
  <script>
    var _paq = window._paq = window._paq || [];
     
     
    _paq.push(['disableCookies']);
     
    _paq.push(["setDomains", ["*.flink.apache.org","*.nightlies.apache.org/flink"]]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
      var u="//matomo.privacy.apache.org/";
      _paq.push(['setTrackerUrl', u+'matomo.php']);
      _paq.push(['setSiteId', '1']);
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
    })();
  </script>
  
</head>

<body dir=>
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  

<nav>


<a id="logo" href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3">
    <img width="70%" src="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/navbar-brand-logo.jpg">
</a>
<p style="text-align:right">v0.3.0</p>

<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>










  





  
  <ul>
    
      
        <li>
          
  
  

  
  
    <input type="checkbox" id="section-6c07f7e07850a28420f21d62041fba0d" class="toggle"  />
    <label for="section-6c07f7e07850a28420f21d62041fba0d" class="flex justify-between"><div style="font-weight:450;margin-bottom:0.5em"><i class="fa fa-book title maindish" aria-hidden="true"></i>&nbsp;&nbsp;Concepts</div><span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/concepts/overview/" class="">Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/concepts/basic-concepts/" class="">Basic Concepts</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/concepts/file-layouts/" class="">File Layouts</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/concepts/lsm-trees/" class="">LSM Trees</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/concepts/consistency-guarantees/" class="">Consistency Guarantees</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
  
    <input type="checkbox" id="section-3c3b30e0c900292dd234d4c3eb6b1d07" class="toggle"  />
    <label for="section-3c3b30e0c900292dd234d4c3eb6b1d07" class="flex justify-between"><div style="font-weight:450;margin-bottom:0.5em"><i class="fa fa-gear title maindish" aria-hidden="true"></i>&nbsp;&nbsp;Engines</div><span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/engines/overview/" class="">Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/engines/flink/" class="">Flink</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/engines/spark3/" class="">Spark3</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/engines/spark2/" class="">Spark2</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/engines/hive/" class="">Hive</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/engines/trino/" class="">Trino</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
  
    <input type="checkbox" id="section-f2a11ba4196b33034e80bb68b108033e" class="toggle"  />
    <label for="section-f2a11ba4196b33034e80bb68b108033e" class="flex justify-between"><div style="font-weight:450;margin-bottom:0.5em"><i class="fa fa-folder title maindish" aria-hidden="true"></i>&nbsp;&nbsp;Filesystems</div><span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/filesystems/overview/" class="">Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/filesystems/oss/" class="">OSS</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/filesystems/s3/" class="">S3</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
  
    <input type="checkbox" id="section-9158e11b187116611eb1a3ed1d21db1e" class="toggle" checked />
    <label for="section-9158e11b187116611eb1a3ed1d21db1e" class="flex justify-between"><div style="font-weight:450;margin-bottom:0.5em"><i class="fa fa-database title maindish" aria-hidden="true"></i>&nbsp;&nbsp;How to</div><span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/how-to/creating-catalogs/" class="">Creating Catalogs</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/how-to/creating-tables/" class="">Creating Tables</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/how-to/altering-tables/" class="">Altering Tables</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/how-to/writing-tables/" class=" active">Writing Tables</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/how-to/querying-tables/" class="">Querying Tables</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
  
    <input type="checkbox" id="section-df6d1d7f40d2e224a80f115a5b7830c6" class="toggle"  />
    <label for="section-df6d1d7f40d2e224a80f115a5b7830c6" class="flex justify-between"><div style="font-weight:450;margin-bottom:0.5em"><i class="fa fa-star title maindish" aria-hidden="true"></i>&nbsp;&nbsp;Features</div><span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/features/table-types/" class="">Table Types</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/features/external-log-systems/" class="">External Log Systems</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/features/lookup-joins/" class="">Lookup Joins</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
  
    <input type="checkbox" id="section-80b8422d3b0ecaa05fe471d0cbbb6785" class="toggle"  />
    <label for="section-80b8422d3b0ecaa05fe471d0cbbb6785" class="flex justify-between"><div style="font-weight:450;margin-bottom:0.5em"><i class="fa fa-wrench title maindish" aria-hidden="true"></i>&nbsp;&nbsp;Maintenance</div><span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/maintenance/write-performance/" class="">Write Performance</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/maintenance/expiring-snapshots/" class="">Expiring Snapshots</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/maintenance/rescale-bucket/" class="">Rescale Bucket</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/maintenance/manage-partition/" class="">Manage Partition</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
  
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/docs/maintenance/configurations/" class="">Configurations</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>
















<br/>
<hr class="menu-break">

<a href="//flink.apache.org" style="color:black;margin-bottom:0.5em"><i class="link fa fa-external-link title" aria-hidden="true"></i> Project Homepage</a>
<br/>

<a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/api/java/" style="color:black;margin-bottom:0.5em"><i class="link fa fa-external-link title" aria-hidden="true"></i> JavaDocs</a>
<br/>

<hr class="menu-break">
<li style="list-style-type: none">
  <br>
  <input type="checkbox" id="section-version-picker" class="toggle">
  <label for="section-version-picker" class="flex justify-between">
     <div style="font-weight:450;margin-bottom:0.5em">Pick Docs Version</div>
     <span>▾</span>
  </label>
  <ul>
    <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3">
      0.3 (✓)
    </a>
    <hr class="menu-break">
    
      <li>
        <a href="https://nightlies.apache.org/flink/flink-table-store-docs-release-0.2">
          v0.2
        </a>
      </li>
    
    <hr class="menu-break">
    <li>
      <a href="//nightlies.apache.org/flink/flink-table-store-docs-release-0.3/versions">
          All Versions
      </a>
    </li>
  </ul>
</li>









</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/flink/flink-table-store-docs-release-0.3/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Writing Tables</strong>

  <label for="toc-control">
    
    <img src="/flink/flink-table-store-docs-release-0.3/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  

<nav id="TableOfContents"><h3>On This Page <button class="toc" onclick="collapseToc()"><i class="fa fa-compress" aria-hidden="true"></i></button></h3>
  <ul>
    <li><a href="#syntax">Syntax</a></li>
    <li><a href="#applying-recordschanges-to-tables">Applying Records/Changes to Tables</a></li>
    <li><a href="#overwriting-the-whole-table">Overwriting the Whole Table</a></li>
    <li><a href="#overwriting-a-partition">Overwriting a Partition</a></li>
    <li><a href="#purging-tables">Purging tables</a></li>
    <li><a href="#purging-partitions">Purging Partitions</a></li>
  </ul>
</nav>


  </aside>
  
 
      </header>

      






      
  <article class="markdown"><!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<h1 id="writing-tables">
  Writing Tables
  <a class="anchor" href="#writing-tables">#</a>
</h1>
<p>You can use the <code>INSERT</code> statement to inserts new rows into a table
or overwrites the existing data in the table. The inserted rows can
be specified by value expressions or result from a query.</p>
<h2 id="syntax">
  Syntax
  <a class="anchor" href="#syntax">#</a>
</h2>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">INSERT</span> <span class="err">{</span> <span class="k">INTO</span> <span class="o">|</span> <span class="n">OVERWRITE</span> <span class="err">}</span> <span class="n">table_identifier</span> <span class="p">[</span> <span class="n">part_spec</span> <span class="p">]</span> <span class="p">[</span> <span class="n">column_list</span> <span class="p">]</span> <span class="err">{</span> <span class="n">value_expr</span> <span class="o">|</span> <span class="n">query</span> <span class="err">}</span>
</code></pre></div><ul>
<li>
<p>part_spec</p>
<p>An optional parameter that specifies a comma-separated list of key and value pairs for partitions.
Note that one can use a typed literal (e.g., date’2019-01-02’) in the partition spec.</p>
<p>Syntax: PARTITION ( partition_col_name = partition_col_val [ , &hellip; ] )</p>
</li>
<li>
<p>column_list</p>
<p>An optional parameter that specifies a comma-separated list of columns belonging to the
table_identifier table.</p>
<p>Syntax: (col_name1 [, column_name2, &hellip;])</p>
<blockquote class="book-hint info">
  <pre><code>All specified columns should exist in the table and not be duplicated from each other.
It includes all columns except the static partition columns.
  
The size of the column list should be exactly the size of the data from VALUES clause or query.
</code></pre>

</blockquote>

</li>
<li>
<p>value_expr</p>
<p>Specifies the values to be inserted. Either an explicitly specified value or a NULL can be
inserted. A comma must be used to separate each value in the clause. More than one set of
values can be specified to insert multiple rows.</p>
<p>Syntax: VALUES ( { value | NULL } [ , … ] ) [ , ( … ) ]</p>
<blockquote class="book-hint info">
  <pre><code>Currently, Flink doesn't support use NULL directly, so the NULL should be cast to actual 
data type by `CAST (NULL AS data_type)`.
</code></pre>

</blockquote>

</li>
</ul>
<p>For more information, please check the syntax document:</p>
<p><a href="https://nightlies.apache.org/flink/flink-docs-release-1.16/docs/dev/table/sql/insert/">Flink INSERT Statement</a></p>
<p><a href="https://spark.apache.org/docs/latest/sql-ref-syntax-dml-insert-table.html">Spark INSERT Statement</a></p>
<h2 id="applying-recordschanges-to-tables">
  Applying Records/Changes to Tables
  <a class="anchor" href="#applying-recordschanges-to-tables">#</a>
</h2>





<div class="book-tabs"><input 
    type="radio"
    class="toggle"
    data-tab-group="flink-tabs"
    data-tab-item="Flink"
    name="tabs-insert-into-example"
    id="tabs-insert-into-example-0"
    checked="checked" 
    onclick="onSwitch('Flink')"
  />
  <label for="tabs-insert-into-example-0">Flink</label>
  <div class="book-tabs-content markdown-inner"><p>Use <code>INSERT INTO</code> to apply records and changes to tables.</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">MyTable</span> <span class="k">SELECT</span> <span class="p">...</span>
</code></pre></div></div><input 
    type="radio"
    class="toggle"
    data-tab-group="flink-tabs"
    data-tab-item="Spark3"
    name="tabs-insert-into-example"
    id="tabs-insert-into-example-1"
     
    onclick="onSwitch('Spark3')"
  />
  <label for="tabs-insert-into-example-1">Spark3</label>
  <div class="book-tabs-content markdown-inner"><p>Use <code>INSERT INTO</code> to apply records and changes to tables.</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">MyTable</span> <span class="k">SELECT</span> <span class="p">...</span>
</code></pre></div></div></div>

<h2 id="overwriting-the-whole-table">
  Overwriting the Whole Table
  <a class="anchor" href="#overwriting-the-whole-table">#</a>
</h2>
<p>For unpartitioned tables, Table Store supports overwriting the whole table.</p>





<div class="book-tabs"><input 
    type="radio"
    class="toggle"
    data-tab-group="flink-tabs"
    data-tab-item="Flink"
    name="tabs-insert-overwrite-unpartitioned-example"
    id="tabs-insert-overwrite-unpartitioned-example-0"
    checked="checked" 
    onclick="onSwitch('Flink')"
  />
  <label for="tabs-insert-overwrite-unpartitioned-example-0">Flink</label>
  <div class="book-tabs-content markdown-inner"><p>Use <code>INSERT OVERWRITE</code> to overwrite the whole unpartitioned table.</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">INSERT</span> <span class="n">OVERWRITE</span> <span class="n">MyTable</span> <span class="k">SELECT</span> <span class="p">...</span>
</code></pre></div></div></div>

<h2 id="overwriting-a-partition">
  Overwriting a Partition
  <a class="anchor" href="#overwriting-a-partition">#</a>
</h2>
<p>For partitioned tables, Table Store supports overwriting a partition.</p>





<div class="book-tabs"><input 
    type="radio"
    class="toggle"
    data-tab-group="flink-tabs"
    data-tab-item="Flink"
    name="tabs-insert-overwrite-partitioned-example"
    id="tabs-insert-overwrite-partitioned-example-0"
    checked="checked" 
    onclick="onSwitch('Flink')"
  />
  <label for="tabs-insert-overwrite-partitioned-example-0">Flink</label>
  <div class="book-tabs-content markdown-inner"><p>Use <code>INSERT OVERWRITE</code> to overwrite a partition.</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">INSERT</span> <span class="n">OVERWRITE</span> <span class="n">MyTable</span> <span class="n">PARTITION</span> <span class="p">(</span><span class="n">key1</span> <span class="o">=</span> <span class="n">value1</span><span class="p">,</span> <span class="n">key2</span> <span class="o">=</span> <span class="n">value2</span><span class="p">,</span> <span class="p">...)</span> <span class="k">SELECT</span> <span class="p">...</span>
</code></pre></div></div></div>

<h2 id="purging-tables">
  Purging tables
  <a class="anchor" href="#purging-tables">#</a>
</h2>
<p>You can use <code>INSERT OVERWRITE</code> to purge tables by inserting empty value.</p>





<div class="book-tabs"><input 
    type="radio"
    class="toggle"
    data-tab-group="flink-tabs"
    data-tab-item="Flink"
    name="tabs-purge-tables-syntax"
    id="tabs-purge-tables-syntax-0"
    checked="checked" 
    onclick="onSwitch('Flink')"
  />
  <label for="tabs-purge-tables-syntax-0">Flink</label>
  <div class="book-tabs-content markdown-inner"><div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">INSERT</span> <span class="n">OVERWRITE</span> <span class="n">MyTable</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">MyTable</span> <span class="k">WHERE</span> <span class="k">false</span>
</code></pre></div></div></div>

<h2 id="purging-partitions">
  Purging Partitions
  <a class="anchor" href="#purging-partitions">#</a>
</h2>
<p>Currently, Table Store supports two ways to purge partitions.</p>
<ol>
<li>
<p>Like purging tables, you can use <code>INSERT OVERWRITE</code> to purge data of partitions by inserting empty value to them.</p>
</li>
<li>
<p>Method #1 dose not support to drop multiple partitions. In case that you need to drop multiple partitions, you can submit the drop-partition job through <code>flink run</code>.</p>
</li>
</ol>





<div class="book-tabs"><input 
    type="radio"
    class="toggle"
    data-tab-group="flink-tabs"
    data-tab-item="Flink"
    name="tabs-purge-partitions-syntax"
    id="tabs-purge-partitions-syntax-0"
    checked="checked" 
    onclick="onSwitch('Flink')"
  />
  <label for="tabs-purge-partitions-syntax-0">Flink</label>
  <div class="book-tabs-content markdown-inner"><div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="c1">-- Syntax
</span><span class="c1"></span><span class="k">INSERT</span> <span class="n">OVERWRITE</span> <span class="n">MyTable</span> <span class="n">PARTITION</span> <span class="p">(</span><span class="n">key1</span> <span class="o">=</span> <span class="n">value1</span><span class="p">,</span> <span class="n">key2</span> <span class="o">=</span> <span class="n">value2</span><span class="p">,</span> <span class="p">...)</span> <span class="k">SELECT</span> <span class="n">selectSpec</span> <span class="k">FROM</span> <span class="n">MyTable</span> <span class="k">WHERE</span> <span class="k">false</span>

<span class="c1">-- The following SQL is an example:
</span><span class="c1">-- table definition
</span><span class="c1"></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">MyTable</span> <span class="p">(</span>
    <span class="n">k0</span> <span class="nb">INT</span><span class="p">,</span>
    <span class="n">k1</span> <span class="nb">INT</span><span class="p">,</span>
    <span class="n">v</span> <span class="n">STRING</span>
<span class="p">)</span> <span class="n">PARTITIONED</span> <span class="k">BY</span> <span class="p">(</span><span class="n">k0</span><span class="p">,</span> <span class="n">k1</span><span class="p">);</span>

<span class="c1">-- you can use
</span><span class="c1"></span><span class="k">INSERT</span> <span class="n">OVERWRITE</span> <span class="n">MyTable</span> <span class="n">PARTITION</span> <span class="p">(</span><span class="n">k0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">SELECT</span> <span class="n">k1</span><span class="p">,</span> <span class="n">v</span> <span class="k">FROM</span> <span class="n">MyTable</span> <span class="k">WHERE</span> <span class="k">false</span>

<span class="c1">-- or
</span><span class="c1"></span><span class="k">INSERT</span> <span class="n">OVERWRITE</span> <span class="n">MyTable</span> <span class="n">PARTITION</span> <span class="p">(</span><span class="n">k0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">k1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">SELECT</span> <span class="n">v</span> <span class="k">FROM</span> <span class="n">MyTable</span> <span class="k">WHERE</span> <span class="k">false</span>
</code></pre></div></div><input 
    type="radio"
    class="toggle"
    data-tab-group="flink-tabs"
    data-tab-item="Flink Job"
    name="tabs-purge-partitions-syntax"
    id="tabs-purge-partitions-syntax-1"
     
    onclick="onSwitch('Flink Job')"
  />
  <label for="tabs-purge-partitions-syntax-1">Flink Job</label>
  <div class="book-tabs-content markdown-inner"><p>Run the following command to submit a drop-partition job for the table.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">&lt;FLINK_HOME&gt;/bin/flink run <span class="se">\
</span><span class="se"></span>    -c org.apache.flink.table.store.connector.action.FlinkActions <span class="se">\
</span><span class="se"></span>    /path/to/flink-table-store-dist-0.3.0.jar <span class="se">\
</span><span class="se"></span>    drop-partition <span class="se">\
</span><span class="se"></span>    --warehouse &lt;warehouse-path&gt; <span class="se">\
</span><span class="se"></span>    --database &lt;database-name&gt; <span class="se">\
</span><span class="se"></span>    --table &lt;table-name&gt;
    --partition &lt;partition_spec&gt;
    <span class="o">[</span>--partition &lt;partition_spec&gt; ...<span class="o">]</span>

partition_spec:
<span class="nv">key1</span><span class="o">=</span>value1,key2<span class="o">=</span>value2...
</code></pre></div><p>For more information of drop-partition, see</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">&lt;FLINK_HOME&gt;/bin/flink run <span class="se">\
</span><span class="se"></span>    -c org.apache.flink.table.store.connector.action.FlinkActions <span class="se">\
</span><span class="se"></span>    /path/to/flink-table-store-dist-0.3.0.jar <span class="se">\
</span><span class="se"></span>    drop-partition --help
</code></pre></div></div></div>

</article>
 
      

      <footer class="book-footer">
        
  




<a href="//github.com/apache/flink-table-store/edit/release-0.3/docs/content/docs/how-to/writing-tables.md" style="color:black"><i class="fa fa-edit fa-fw"></i>Edit This Page</a>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  

<nav id="TableOfContents"><h3>On This Page <button class="toc" onclick="collapseToc()"><i class="fa fa-compress" aria-hidden="true"></i></button></h3>
  <ul>
    <li><a href="#syntax">Syntax</a></li>
    <li><a href="#applying-recordschanges-to-tables">Applying Records/Changes to Tables</a></li>
    <li><a href="#overwriting-the-whole-table">Overwriting the Whole Table</a></li>
    <li><a href="#overwriting-a-partition">Overwriting a Partition</a></li>
    <li><a href="#purging-tables">Purging tables</a></li>
    <li><a href="#purging-partitions">Purging Partitions</a></li>
  </ul>
</nav>

 
    </aside>
    <aside class="expand-toc">
      <button class="toc" onclick="expandToc()">
        <i class="fa fa-expand" aria-hidden="true"></i>
      </button>
    </aside>
    
  </main>

  
</body>

</html>












