<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_392) on Mon Dec 04 00:29:31 UTC 2023 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>FileStoreCommitImpl (Paimon : 0.5-SNAPSHOT API)</title>
<meta name="date" content="2023-12-04">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="FileStoreCommitImpl (Paimon : 0.5-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FileStoreCommitImpl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><a href="http://paimon.apache.org/" target="_top"><h1>Back to Paimon Website</h1></a> <script>var _paq=window._paq=window._paq||[];_paq.push(["disableCookies"]),_paq.push(["setDomains",["*.paimon.apache.org"]]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var u="//matomo.privacy.apache.org/";_paq.push(["setTrackerUrl",u+"matomo.php"]),_paq.push(["setSiteId","1"]);var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s)}();</script></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html" title="interface in org.apache.paimon.operation"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/apache/paimon/operation/FileStoreExpire.html" title="interface in org.apache.paimon.operation"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/paimon/operation/FileStoreCommitImpl.html" target="_top">Frames</a></li>
<li><a href="FileStoreCommitImpl.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.paimon.operation</div>
<h2 title="Class FileStoreCommitImpl" class="title">Class FileStoreCommitImpl</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.paimon.operation.FileStoreCommitImpl</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html" title="interface in org.apache.paimon.operation">FileStoreCommit</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">FileStoreCommitImpl</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../org/apache/paimon/operation/FileStoreCommit.html" title="interface in org.apache.paimon.operation">FileStoreCommit</a></pre>
<div class="block">Default implementation of <a href="../../../../org/apache/paimon/operation/FileStoreCommit.html" title="interface in org.apache.paimon.operation"><code>FileStoreCommit</code></a>.

 <p>This class provides an atomic commit method to the user.

 <ol>
   <li>Before calling <a href="../../../../org/apache/paimon/operation/FileStoreCommitImpl.html#commit-org.apache.paimon.manifest.ManifestCommittable-java.util.Map-"><code>commit(org.apache.paimon.manifest.ManifestCommittable, java.util.Map&lt;java.lang.String, java.lang.String&gt;)</code></a>, if user cannot determine if this commit
       is done before, user should first call <a href="../../../../org/apache/paimon/operation/FileStoreCommitImpl.html#filterCommitted-java.util.Set-"><code>filterCommitted(java.util.Set&lt;java.lang.Long&gt;)</code></a>.
   <li>Before committing, it will first check for conflicts by checking if all files to be removed
       currently exists, and if modified files have overlapping key ranges with existing files.
   <li>After that it use the external <a href="../../../../org/apache/paimon/operation/FileStoreCommitImpl.html#lock"><code>lock</code></a> (if provided) or the atomic
       rename of the file system to ensure atomicity.
   <li>If commit fails due to conflicts or exception it tries its best to clean up and aborts.
   <li>If atomic rename fails it tries again after reading the latest snapshot from step 2.
 </ol>

 <p>NOTE: If you want to modify this class, any exception during commit MUST NOT BE IGNORED. They
 must be thrown to restart the job. It is recommended to run FileStoreCommitTest thousands of
 times to make sure that your changes is correct.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/apache/paimon/operation/FileStoreCommitImpl.html#FileStoreCommitImpl-org.apache.paimon.fs.FileIO-org.apache.paimon.schema.SchemaManager-java.lang.String-org.apache.paimon.types.RowType-org.apache.paimon.utils.FileStorePathFactory-org.apache.paimon.utils.SnapshotManager-org.apache.paimon.manifest.ManifestFile.Factory-org.apache.paimon.manifest.ManifestList.Factory-org.apache.paimon.manifest.IndexManifestFile.Factory-org.apache.paimon.operation.FileStoreScan-int-org.apache.paimon.options.MemorySize-org.apache.paimon.options.MemorySize-int-boolean-java.util.Comparator-">FileStoreCommitImpl</a></span>(<a href="../../../../org/apache/paimon/fs/FileIO.html" title="interface in org.apache.paimon.fs">FileIO</a>&nbsp;fileIO,
                   <a href="../../../../org/apache/paimon/schema/SchemaManager.html" title="class in org.apache.paimon.schema">SchemaManager</a>&nbsp;schemaManager,
                   <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;commitUser,
                   <a href="../../../../org/apache/paimon/types/RowType.html" title="class in org.apache.paimon.types">RowType</a>&nbsp;partitionType,
                   <a href="../../../../org/apache/paimon/utils/FileStorePathFactory.html" title="class in org.apache.paimon.utils">FileStorePathFactory</a>&nbsp;pathFactory,
                   <a href="../../../../org/apache/paimon/utils/SnapshotManager.html" title="class in org.apache.paimon.utils">SnapshotManager</a>&nbsp;snapshotManager,
                   <a href="../../../../org/apache/paimon/manifest/ManifestFile.Factory.html" title="class in org.apache.paimon.manifest">ManifestFile.Factory</a>&nbsp;manifestFileFactory,
                   <a href="../../../../org/apache/paimon/manifest/ManifestList.Factory.html" title="class in org.apache.paimon.manifest">ManifestList.Factory</a>&nbsp;manifestListFactory,
                   <a href="../../../../org/apache/paimon/manifest/IndexManifestFile.Factory.html" title="class in org.apache.paimon.manifest">IndexManifestFile.Factory</a>&nbsp;indexManifestFileFactory,
                   <a href="../../../../org/apache/paimon/operation/FileStoreScan.html" title="interface in org.apache.paimon.operation">FileStoreScan</a>&nbsp;scan,
                   int&nbsp;numBucket,
                   <a href="../../../../org/apache/paimon/options/MemorySize.html" title="class in org.apache.paimon.options">MemorySize</a>&nbsp;manifestTargetSize,
                   <a href="../../../../org/apache/paimon/options/MemorySize.html" title="class in org.apache.paimon.options">MemorySize</a>&nbsp;manifestFullCompactionSize,
                   int&nbsp;manifestMergeMinCount,
                   boolean&nbsp;dynamicPartitionOverwrite,
                   <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html?is-external=true" title="class or interface in java.util">Comparator</a>&lt;<a href="../../../../org/apache/paimon/data/InternalRow.html" title="interface in org.apache.paimon.data">InternalRow</a>&gt;&nbsp;keyComparator)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/paimon/operation/FileStoreCommitImpl.html#abort-java.util.List-">abort</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../org/apache/paimon/table/sink/CommitMessage.html" title="interface in org.apache.paimon.table.sink">CommitMessage</a>&gt;&nbsp;commitMessages)</code>
<div class="block">Abort an unsuccessful commit.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/paimon/operation/FileStoreCommitImpl.html#commit-org.apache.paimon.manifest.ManifestCommittable-java.util.Map-">commit</a></span>(<a href="../../../../org/apache/paimon/manifest/ManifestCommittable.html" title="class in org.apache.paimon.manifest">ManifestCommittable</a>&nbsp;committable,
      <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;properties)</code>
<div class="block">Commit from manifest committable.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/paimon/operation/FileStoreCommitImpl.html#dropPartitions-java.util.List-long-">dropPartitions</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&gt;&nbsp;partitions,
              long&nbsp;commitIdentifier)</code>
<div class="block">Drop multiple partitions.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/paimon/operation/FileStoreCommitImpl.html#filterCommitted-java.util.Set-">filterCommitted</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;commitIdentifiers)</code>
<div class="block">Find out which commit identifier need to be retried when recovering from the failure.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html" title="interface in org.apache.paimon.operation">FileStoreCommit</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/paimon/operation/FileStoreCommitImpl.html#ignoreEmptyCommit-boolean-">ignoreEmptyCommit</a></span>(boolean&nbsp;ignoreEmptyCommit)</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/paimon/operation/FileStoreCommitImpl.html#overwrite-java.util.Map-org.apache.paimon.manifest.ManifestCommittable-java.util.Map-">overwrite</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;partition,
         <a href="../../../../org/apache/paimon/manifest/ManifestCommittable.html" title="class in org.apache.paimon.manifest">ManifestCommittable</a>&nbsp;committable,
         <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;properties)</code>
<div class="block">Overwrite from manifest committable and partition.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/paimon/operation/FileStoreCommitImpl.html#purgeTable-long-">purgeTable</a></span>(long&nbsp;commitIdentifier)</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/paimon/operation/FileStoreCommitImpl.html#tryCommitOnce-java.util.List-java.util.List-java.util.List-long-java.lang.Long-java.util.Map-org.apache.paimon.Snapshot.CommitKind-org.apache.paimon.Snapshot-java.lang.Long-">tryCommitOnce</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../org/apache/paimon/manifest/ManifestEntry.html" title="class in org.apache.paimon.manifest">ManifestEntry</a>&gt;&nbsp;tableFiles,
             <a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../org/apache/paimon/manifest/ManifestEntry.html" title="class in org.apache.paimon.manifest">ManifestEntry</a>&gt;&nbsp;changelogFiles,
             <a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../org/apache/paimon/manifest/IndexManifestEntry.html" title="class in org.apache.paimon.manifest">IndexManifestEntry</a>&gt;&nbsp;indexFiles,
             long&nbsp;identifier,
             <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&nbsp;watermark,
             <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;logOffsets,
             <a href="../../../../org/apache/paimon/Snapshot.CommitKind.html" title="enum in org.apache.paimon">Snapshot.CommitKind</a>&nbsp;commitKind,
             <a href="../../../../org/apache/paimon/Snapshot.html" title="class in org.apache.paimon">Snapshot</a>&nbsp;latestSnapshot,
             <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&nbsp;safeLatestSnapshotId)</code>&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html" title="interface in org.apache.paimon.operation">FileStoreCommit</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/paimon/operation/FileStoreCommitImpl.html#withLock-org.apache.paimon.operation.Lock-">withLock</a></span>(<a href="../../../../org/apache/paimon/operation/Lock.html" title="interface in org.apache.paimon.operation">Lock</a>&nbsp;lock)</code>
<div class="block">With global lock.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.paimon.operation.FileStoreCommit">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.apache.paimon.operation.<a href="../../../../org/apache/paimon/operation/FileStoreCommit.html" title="interface in org.apache.paimon.operation">FileStoreCommit</a></h3>
<code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html#filterCommitted-java.util.List-">filterCommitted</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="FileStoreCommitImpl-org.apache.paimon.fs.FileIO-org.apache.paimon.schema.SchemaManager-java.lang.String-org.apache.paimon.types.RowType-org.apache.paimon.utils.FileStorePathFactory-org.apache.paimon.utils.SnapshotManager-org.apache.paimon.manifest.ManifestFile.Factory-org.apache.paimon.manifest.ManifestList.Factory-org.apache.paimon.manifest.IndexManifestFile.Factory-org.apache.paimon.operation.FileStoreScan-int-org.apache.paimon.options.MemorySize-org.apache.paimon.options.MemorySize-int-boolean-java.util.Comparator-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FileStoreCommitImpl</h4>
<pre>public&nbsp;FileStoreCommitImpl(<a href="../../../../org/apache/paimon/fs/FileIO.html" title="interface in org.apache.paimon.fs">FileIO</a>&nbsp;fileIO,
                           <a href="../../../../org/apache/paimon/schema/SchemaManager.html" title="class in org.apache.paimon.schema">SchemaManager</a>&nbsp;schemaManager,
                           <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;commitUser,
                           <a href="../../../../org/apache/paimon/types/RowType.html" title="class in org.apache.paimon.types">RowType</a>&nbsp;partitionType,
                           <a href="../../../../org/apache/paimon/utils/FileStorePathFactory.html" title="class in org.apache.paimon.utils">FileStorePathFactory</a>&nbsp;pathFactory,
                           <a href="../../../../org/apache/paimon/utils/SnapshotManager.html" title="class in org.apache.paimon.utils">SnapshotManager</a>&nbsp;snapshotManager,
                           <a href="../../../../org/apache/paimon/manifest/ManifestFile.Factory.html" title="class in org.apache.paimon.manifest">ManifestFile.Factory</a>&nbsp;manifestFileFactory,
                           <a href="../../../../org/apache/paimon/manifest/ManifestList.Factory.html" title="class in org.apache.paimon.manifest">ManifestList.Factory</a>&nbsp;manifestListFactory,
                           <a href="../../../../org/apache/paimon/manifest/IndexManifestFile.Factory.html" title="class in org.apache.paimon.manifest">IndexManifestFile.Factory</a>&nbsp;indexManifestFileFactory,
                           <a href="../../../../org/apache/paimon/operation/FileStoreScan.html" title="interface in org.apache.paimon.operation">FileStoreScan</a>&nbsp;scan,
                           int&nbsp;numBucket,
                           <a href="../../../../org/apache/paimon/options/MemorySize.html" title="class in org.apache.paimon.options">MemorySize</a>&nbsp;manifestTargetSize,
                           <a href="../../../../org/apache/paimon/options/MemorySize.html" title="class in org.apache.paimon.options">MemorySize</a>&nbsp;manifestFullCompactionSize,
                           int&nbsp;manifestMergeMinCount,
                           boolean&nbsp;dynamicPartitionOverwrite,
                           <a href="http://docs.oracle.com/javase/7/docs/api/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation">@Nullable</a>
                           <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html?is-external=true" title="class or interface in java.util">Comparator</a>&lt;<a href="../../../../org/apache/paimon/data/InternalRow.html" title="interface in org.apache.paimon.data">InternalRow</a>&gt;&nbsp;keyComparator)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="withLock-org.apache.paimon.operation.Lock-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>withLock</h4>
<pre>public&nbsp;<a href="../../../../org/apache/paimon/operation/FileStoreCommit.html" title="interface in org.apache.paimon.operation">FileStoreCommit</a>&nbsp;withLock(<a href="../../../../org/apache/paimon/operation/Lock.html" title="interface in org.apache.paimon.operation">Lock</a>&nbsp;lock)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html#withLock-org.apache.paimon.operation.Lock-">FileStoreCommit</a></code></span></div>
<div class="block">With global lock.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html#withLock-org.apache.paimon.operation.Lock-">withLock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html" title="interface in org.apache.paimon.operation">FileStoreCommit</a></code></dd>
</dl>
</li>
</ul>
<a name="ignoreEmptyCommit-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ignoreEmptyCommit</h4>
<pre>public&nbsp;<a href="../../../../org/apache/paimon/operation/FileStoreCommit.html" title="interface in org.apache.paimon.operation">FileStoreCommit</a>&nbsp;ignoreEmptyCommit(boolean&nbsp;ignoreEmptyCommit)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html#ignoreEmptyCommit-boolean-">ignoreEmptyCommit</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html" title="interface in org.apache.paimon.operation">FileStoreCommit</a></code></dd>
</dl>
</li>
</ul>
<a name="filterCommitted-java.util.Set-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>filterCommitted</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;filterCommitted(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;commitIdentifiers)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html#filterCommitted-java.util.Set-">FileStoreCommit</a></code></span></div>
<div class="block">Find out which commit identifier need to be retried when recovering from the failure.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html#filterCommitted-java.util.Set-">filterCommitted</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html" title="interface in org.apache.paimon.operation">FileStoreCommit</a></code></dd>
</dl>
</li>
</ul>
<a name="commit-org.apache.paimon.manifest.ManifestCommittable-java.util.Map-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commit</h4>
<pre>public&nbsp;void&nbsp;commit(<a href="../../../../org/apache/paimon/manifest/ManifestCommittable.html" title="class in org.apache.paimon.manifest">ManifestCommittable</a>&nbsp;committable,
                   <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;properties)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html#commit-org.apache.paimon.manifest.ManifestCommittable-java.util.Map-">FileStoreCommit</a></code></span></div>
<div class="block">Commit from manifest committable.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html#commit-org.apache.paimon.manifest.ManifestCommittable-java.util.Map-">commit</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html" title="interface in org.apache.paimon.operation">FileStoreCommit</a></code></dd>
</dl>
</li>
</ul>
<a name="overwrite-java.util.Map-org.apache.paimon.manifest.ManifestCommittable-java.util.Map-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>overwrite</h4>
<pre>public&nbsp;void&nbsp;overwrite(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;partition,
                      <a href="../../../../org/apache/paimon/manifest/ManifestCommittable.html" title="class in org.apache.paimon.manifest">ManifestCommittable</a>&nbsp;committable,
                      <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;properties)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html#overwrite-java.util.Map-org.apache.paimon.manifest.ManifestCommittable-java.util.Map-">FileStoreCommit</a></code></span></div>
<div class="block">Overwrite from manifest committable and partition.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html#overwrite-java.util.Map-org.apache.paimon.manifest.ManifestCommittable-java.util.Map-">overwrite</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html" title="interface in org.apache.paimon.operation">FileStoreCommit</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>partition</code> - A single partition maps each partition key to a partition value. Depending
     on the user-defined statement, the partition might not include all partition keys. Also
     note that this partition does not necessarily equal to the partitions of the newly added
     key-values. This is just the partition to be cleaned up.</dd>
</dl>
</li>
</ul>
<a name="dropPartitions-java.util.List-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dropPartitions</h4>
<pre>public&nbsp;void&nbsp;dropPartitions(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&gt;&nbsp;partitions,
                           long&nbsp;commitIdentifier)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html#dropPartitions-java.util.List-long-">FileStoreCommit</a></code></span></div>
<div class="block">Drop multiple partitions. The <code>Snapshot.CommitKind</code> of generated snapshot is <code>Snapshot.CommitKind#OVERWRITE</code>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html#dropPartitions-java.util.List-long-">dropPartitions</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html" title="interface in org.apache.paimon.operation">FileStoreCommit</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>partitions</code> - A list of partition <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util"><code>Map</code></a>s. NOTE: cannot be empty!</dd>
</dl>
</li>
</ul>
<a name="purgeTable-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>purgeTable</h4>
<pre>public&nbsp;void&nbsp;purgeTable(long&nbsp;commitIdentifier)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html#purgeTable-long-">purgeTable</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html" title="interface in org.apache.paimon.operation">FileStoreCommit</a></code></dd>
</dl>
</li>
</ul>
<a name="abort-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>abort</h4>
<pre>public&nbsp;void&nbsp;abort(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../org/apache/paimon/table/sink/CommitMessage.html" title="interface in org.apache.paimon.table.sink">CommitMessage</a>&gt;&nbsp;commitMessages)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html#abort-java.util.List-">FileStoreCommit</a></code></span></div>
<div class="block">Abort an unsuccessful commit. The data files will be deleted.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html#abort-java.util.List-">abort</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html" title="interface in org.apache.paimon.operation">FileStoreCommit</a></code></dd>
</dl>
</li>
</ul>
<a name="tryCommitOnce-java.util.List-java.util.List-java.util.List-long-java.lang.Long-java.util.Map-org.apache.paimon.Snapshot.CommitKind-org.apache.paimon.Snapshot-java.lang.Long-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>tryCommitOnce</h4>
<pre><a href="../../../../org/apache/paimon/annotation/VisibleForTesting.html" title="annotation in org.apache.paimon.annotation">@VisibleForTesting</a>
public&nbsp;boolean&nbsp;tryCommitOnce(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../org/apache/paimon/manifest/ManifestEntry.html" title="class in org.apache.paimon.manifest">ManifestEntry</a>&gt;&nbsp;tableFiles,
                                                <a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../org/apache/paimon/manifest/ManifestEntry.html" title="class in org.apache.paimon.manifest">ManifestEntry</a>&gt;&nbsp;changelogFiles,
                                                <a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../org/apache/paimon/manifest/IndexManifestEntry.html" title="class in org.apache.paimon.manifest">IndexManifestEntry</a>&gt;&nbsp;indexFiles,
                                                long&nbsp;identifier,
                                                <a href="http://docs.oracle.com/javase/7/docs/api/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation">@Nullable</a>
                                                <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&nbsp;watermark,
                                                <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;logOffsets,
                                                <a href="../../../../org/apache/paimon/Snapshot.CommitKind.html" title="enum in org.apache.paimon">Snapshot.CommitKind</a>&nbsp;commitKind,
                                                <a href="../../../../org/apache/paimon/Snapshot.html" title="class in org.apache.paimon">Snapshot</a>&nbsp;latestSnapshot,
                                                <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&nbsp;safeLatestSnapshotId)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FileStoreCommitImpl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><a href="http://paimon.apache.org/" target="_top"><h1>Back to Paimon Website</h1></a> <script>var _paq=window._paq=window._paq||[];_paq.push(["disableCookies"]),_paq.push(["setDomains",["*.paimon.apache.org"]]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var u="//matomo.privacy.apache.org/";_paq.push(["setTrackerUrl",u+"matomo.php"]),_paq.push(["setSiteId","1"]);var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s)}();</script></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/paimon/operation/FileStoreCommit.html" title="interface in org.apache.paimon.operation"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/apache/paimon/operation/FileStoreExpire.html" title="interface in org.apache.paimon.operation"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/paimon/operation/FileStoreCommitImpl.html" target="_top">Frames</a></li>
<li><a href="FileStoreCommitImpl.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2023 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</body>
</html>
